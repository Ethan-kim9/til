# 1/17 TIL

마이크로 서비스 핵심 개념 6가지 - Building Microservices

1. 독립적 배포

- 저자 의견 : 마이크로 서비스에서 제일 중요한 내용
- 다른 서비스를 배포하지 않으면서, 마이크로 서비스를 변경, 배포, 출시해야함
- 이를 위해서
  - 마이크로 서비스 간 결합도를 낮춰야한다
  - 즉, 서비스 간에 명시적, 잘 정의되고 안정된 명세/계약이 필요하다.
  - 
2. 비즈니스 도메인을 중심으로 모델링

- 도메인 기준으로 서비스 경계를 정의
  - 즉, 한 마이크로 서비스가 기능에 필요한 전체를 구현한다
  - 새 기능 출시가 쉬워진다
  - 다른 방식으로 마이르코 서비스를 재조합하기 쉬워진다.
- 한 기능의 구현이 여러 마이크로 서비스에 걸쳐 있으면 기능 출시 비용이 올란간다.
  - 서비스 간 조율, 순서 관리 등 더 많은 일을 해야한다
  - 여러 서비스에 걸친 변경은 가능한 덜 할 수 있는 방법을 찾아야 함.
  - 
3. 자신의 상태를 가짐

- 마이크로 서비스는 DB (Data?) 를 공유하지 말아야 함
- 다른 마이크로 서비스가 갖고 있는 데이터에 접근해야 하면, DB에 직접 접근하지말고 API 등을 통해 접근해야한다.
- 데이터를 공유하지 않기 → 구현을 감춤 → 결합도를 낮춤

4. 크기

- "a microservice should be as big as my head" - James Lewis
  - 내 머리가 이해할 수 있을 정도의 크기를 가져야 함
  - 상황에 따라 달라진다? - 편차가 존재한다
    - 오랜 경험자 vs 신규 입사자
    - 스타트업 vs 대기업
- 즉 크기보다는 다음의 두 가지에 집중하자
  - 얼마나 많은 마이크로 서비스를 다룰 수 있는지?
    - 마이크로 서비스 증가 → 복잡도 증가, 새 기술 습득 필요
  - 마이크로 서비스 경계 정의
    - 실타래가 복잡하게 얽히지 않도록
5. 유연함 - 유연함을 주지만, 비용이 듦

- "a microservices buy you options." - James Lewis
- 비용을 들여 미래에 유연해질 수 있는 옵션을 구매함
  - 기술, 확장, 견고함 등에서 유연함을 구매한다.
  - 아직 벌어지지 않은 미래를 위해, 너무 많은 옵션을 구매하는 것은 장애 요인이 됨
- 점진적으로 마이크로서비스로 넘어가는 것을 권장한다.

6. 아키텍처와 조직을 맞춤 - 콘웨이 법칙? : 아키텍쳐가 조직을 따른다.

- 조직 구조 → 아키텍처에 영향을 준다
  - 아키텍처는 그 조직의 조직 구조를 닮는다.
- 소프트웨어를 더 빨리 배포하길 원함
  - 조직 간 이관이나 사일로를 줄여야 함
  - 여러 직능을 한 조직에 모아서 줄인다.
  - 프론트, 백, DB 팀 → 고객, 구매 팀 등으로 변경
- 비즈니스 도메인 → 시스템 아키텍처를 주도하는 주요 원동력

# DNS - Domain Name System
- 도메인 네임을 해석해 ip로 변경해줌


## DNS 의 탄생 배경 - IP
1. 초기엔 아이피를 통한 접근  
ex)1.2.3.4 → 5.6.7.8   
   5.6.7.8 → 1.2.3.4

2. HOST 파일을 통해 접근
- 도메인 주소를 입력하면, HOST 파일에 접근하여 도메인에 대응하는 ip 주소가 있는지 확인
  - 개인이 관리하기 어렵다는 단점이 있음
3. SRI(Standard Research Institute - Network Information Center)
- 도메인 주소를 확인해서 ip로 바꿔주는 사이트를 생성함
- 사이트에서 관리하는 도메인이 굉장히 많아지면서 문제가 생김

4. DNS - 간단한 DNS 통신 구조
- 호스트 파일을 먼저 검증
- 이후 DNS 서버를 통해서 도메인 확인

## DNS 에서 질의와 응답 (역할과 협력)
- 역할과 협력을 하기 위해 필요한 것은 메시지(요청과 응답)
